<tool id="venn_list" name="Venn Diagram" version="0.0.3">
  <description>from lists</description>
  <command interpreter="python">
venn_list.py
$main $main.ext "$main_lab"
#for $s in $sets:
  $s.set $s.set.ext "$s.lab"
#end for
$PDF</command>
  <inputs>
    <param name="main" type="data" format="tabular,fasta,fastq,sff" label="Full dataset (with all identifiers)" />
    <param name="main_lab" size="30" type="text" value="Venn Diagram" label="Plot title"/>
    <repeat name="sets" min="1" max="3" title="Sets">
      <param name="set" type="data" format="tabular,fasta,fastq,sff" label="Members of set" help="Tabular file (uses column one), FASTA, FASTQ or SFF file."/>
      <param name="lab" size="30" type="text" value="Group" label="Caption for set"/>
    </repeat>
  </inputs>
  <outputs>
    <data format="pdf" name="PDF" />
  </outputs>
  <requirements>
    <requirement type="python-module">rpy</requirement>
  </requirements>
  <tests>
    <!-- Doesn't seem to work properly, manages to get two sets, both
         with same FASTA file, but second with default "Group" label.
    <test>
      <param name="main" value="venn_list.tabular" ftype="tabular"/>
      <param name="main_lab" value="Some Proteins"/>
      <param name="set" value="rhodopsin_proteins.fasta"/>
      <param name="lab" value="Rhodopsins"/>
      <output name="PDF" file="venn_list1.pdf" ftype="pdf"/>
    </test>
    -->
    <!-- Can't use more than one repeat value in tests (yet)
    <test>
      <param name="main" value="venn_list.tabular" ftype="tabular"/>
      <param name="main_lab" value="Some Proteins"/>
      <param name="count" value="3"/>
      <param name="set" value="rhodopsin_proteins.fasta"/>
      <param name="lab" value="Rhodopsins"/>
      <param name="set" value="four_human_proteins.fasta"/>
      <param name="lab" value="Human"/>
      <param name="set" value="blastp_four_human_vs_rhodopsin.tabular"/>
      <param name="lab" value="Human vs Rhodopsin BLAST"/>
      <output name="PDF" file="venn_list3.pdf" ftype="pdf"/>
    </test>
    -->
  </tests>
  <help>

.. class:: infomark

**TIP:** If your data is in tabular files, the identifier is assumed to be in column one.



  </help>
</tool>
